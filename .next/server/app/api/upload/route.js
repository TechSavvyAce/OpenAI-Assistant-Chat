"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/route";
exports.ids = ["app/api/upload/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=E%3A%5CHIG%5CTask%5COpenAI-Assistant-API-Chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CHIG%5CTask%5COpenAI-Assistant-API-Chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=E%3A%5CHIG%5CTask%5COpenAI-Assistant-API-Chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CHIG%5CTask%5COpenAI-Assistant-API-Chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var E_HIG_Task_OpenAI_Assistant_API_Chat_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/upload/route.ts */ \"(rsc)/./app/api/upload/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/route\",\n        pathname: \"/api/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/route\"\n    },\n    resolvedPagePath: \"E:\\\\HIG\\\\Task\\\\OpenAI-Assistant-API-Chat\\\\app\\\\api\\\\upload\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_HIG_Task_OpenAI_Assistant_API_Chat_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/upload/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDSElHJTVDVGFzayU1Q09wZW5BSS1Bc3Npc3RhbnQtQVBJLUNoYXQlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUUlM0ElNUNISUclNUNUYXNrJTVDT3BlbkFJLUFzc2lzdGFudC1BUEktQ2hhdCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDa0M7QUFDakc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9uZGF5QXNzaXN0YW50Lz82ZjYzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkU6XFxcXEhJR1xcXFxUYXNrXFxcXE9wZW5BSS1Bc3Npc3RhbnQtQVBJLUNoYXRcXFxcYXBwXFxcXGFwaVxcXFx1cGxvYWRcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VwbG9hZC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwbG9hZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdXBsb2FkL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRTpcXFxcSElHXFxcXFRhc2tcXFxcT3BlbkFJLUFzc2lzdGFudC1BUEktQ2hhdFxcXFxhcHBcXFxcYXBpXFxcXHVwbG9hZFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS91cGxvYWQvcm91dGVcIjtcbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=E%3A%5CHIG%5CTask%5COpenAI-Assistant-API-Chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CHIG%5CTask%5COpenAI-Assistant-API-Chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/upload/route.ts":
/*!*********************************!*\
  !*** ./app/api/upload/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var adm_zip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! adm-zip */ \"(rsc)/./node_modules/adm-zip/adm-zip.js\");\n/* harmony import */ var adm_zip__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(adm_zip__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var node_xlsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! node-xlsx */ \"(rsc)/./node_modules/node-xlsx/lib/index.js\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_5__);\n// app/api/startChat/route.ts\n// This file defines the API route for starting a chat session in an application.\n// It handles POST requests for uploading a file to the OpenAI API for a chat session.\n// The route processes the file from the request, saves it temporarily, and then\n// uploads it to OpenAI, returning the file ID for further operations.\n\n\n\n\n\n\n\n\n// import { load } from \"@pspdfkit/nodejs\";\n// import { PromptTemplate } from \"langchain/prompts\";\n// import { OpenAIEmbeddings } from \"langchain/embeddings/openai\";\n// import { RecursiveCharacterTextSplitter } from \"langchain/text_splitter\";\n// import { PDFLoader } from \"langchain/document_loaders/fs/pdf\";\n// import { TextLoader } from \"langchain/document_loaders/fs/text\";\n// import { DocxLoader } from \"langchain/document_loaders/fs/docx\";\n// import { CSVLoader } from \"langchain/document_loaders/fs/csv\";\n// import { Document } from \"langchain/document\";\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nlet FileIds = [];\n// async function uploadFileLangChain(path: string) {\n//   try {\n//     let type = pathModule.extname(path).slice(1);\n//     let combinedDecompSPR = \"\";\n//     let docs_raw: Document<Record<string, any>>[] = [];\n//     const textSplitter = new RecursiveCharacterTextSplitter({\n//       //chunkSize: 9999,\n//       chunkSize: 133333,\n//       chunkOverlap: 250,\n//     });\n//     // Read the file\n//     //try {\n//     if (type === \"pdf\") {\n//       const pdfLoader = new PDFLoader(path);\n//       docs_raw = await pdfLoader.loadAndSplit(textSplitter);\n//     } else if (type === \"text\") {\n//       const txtLoader = new TextLoader(path);\n//       docs_raw = await txtLoader.loadAndSplit(textSplitter);\n//     } else if (type === \"csv\") {\n//       const csvLoader = new CSVLoader(path);\n//       docs_raw = await csvLoader.loadAndSplit(textSplitter);\n//     } else if (type === \"doc\" || type === \"docx\") {\n//       const docxLoader = new DocxLoader(path);\n//       docs_raw = await docxLoader.loadAndSplit(textSplitter);\n//     } else {\n//       sendData(\"[Processing]:\" + \"Unsupported File. Please try again.\");\n//       sendData(\"[DONE]\");\n//       response.end();\n//       return;\n//     }\n//   } catch (e) {\n//     console.log(\"Uploading with LangChain Error:\", e);\n//   }\n// }\nasync function uploadtoOpenAI(filepath) {\n    try {\n        const fileForRetrieval = await openai.files.create({\n            file: (0,fs__WEBPACK_IMPORTED_MODULE_2__.createReadStream)(filepath),\n            purpose: \"assistants\"\n        });\n        FileIds.push(fileForRetrieval.id);\n        console.log(`File uploaded, ID: ${fileForRetrieval.id}`);\n    } catch (e) {\n        console.log(`Uploading file to OpenAI:`, e);\n    }\n}\n// Function to convert XLSX to PDF\nasync function convertXlsxToCSV(xlsxFilePath, csvFilePath) {\n    try {\n        let obj = node_xlsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"].parse(xlsxFilePath);\n        var rows = [];\n        var writeStr = \"\";\n        //looping through all sheets\n        for(var i = 0; i < obj.length; i++){\n            var sheet = obj[i];\n            //loop through all rows in the sheet\n            for(var j = 0; j < sheet[\"data\"].length; j++){\n                //add the row to the rows array\n                rows.push(sheet[\"data\"][j]);\n            }\n        }\n        //creates the csv string to write it to a file\n        for(var i = 0; i < rows.length; i++){\n            writeStr += rows[i].join(\",\") + \"\\n\";\n        }\n        //writes to a file, but you will presumably send the csv as a\n        //response instead\n        fs__WEBPACK_IMPORTED_MODULE_2___default().writeFile(csvFilePath, writeStr, function(err) {\n            if (err) {\n                return console.log(err);\n            }\n            console.log(`Converted from ${xlsxFilePath} to CSV successfully!`);\n            uploadtoOpenAI(csvFilePath);\n        });\n    } catch (error) {\n        console.error(`Error while converting ${xlsxFilePath} to CSV:`, error);\n        throw error; // Propagate the error further if needed\n    }\n}\n// Function to recursively convert XLSX files in subdirectories to PDFs\nasync function convertXlsxFilesToPdf(directory) {\n    try {\n        const files = fs__WEBPACK_IMPORTED_MODULE_2___default().readdirSync(directory);\n        for (const file of files){\n            const filePath = path__WEBPACK_IMPORTED_MODULE_5___default().join(directory, file);\n            const fileStat = fs__WEBPACK_IMPORTED_MODULE_2___default().statSync(filePath);\n            if (fileStat.isDirectory()) {\n                await convertXlsxFilesToPdf(filePath); // Recursively handle subdirectories\n            } else if (file.endsWith(\".xlsx\")) {\n                const csvFileName = `${path__WEBPACK_IMPORTED_MODULE_5___default().basename(file, \".xlsx\")}.csv`;\n                const csvFilePath = path__WEBPACK_IMPORTED_MODULE_5___default().join(directory, csvFileName);\n                await convertXlsxToCSV(filePath, csvFilePath);\n                console.log(`Converted ${file} to ${csvFileName}`);\n            } else {\n                uploadtoOpenAI(filePath);\n            }\n        }\n    } catch (error) {\n        console.error(`Error while processing directory ${directory}:`, error);\n        throw error; // Propagate the error further if needed\n    }\n}\nasync function POST(request) {\n    try {\n        // Logging the start of the upload process\n        console.log(`Upload API call started`);\n        // Retrieving the file from the form data\n        const data = await request.formData();\n        const uploadedfile = data.get(\"File\");\n        // Handle the case where no file is found in the request\n        if (!uploadedfile) {\n            console.log(\"No File found in the request\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false\n            });\n        }\n        // Convert file to buffer and write to a temporary location\n        const bytes = await uploadedfile.arrayBuffer();\n        const buffer = Buffer.from(bytes);\n        const uploadedFilePath = `/tmp/${uploadedfile.name}`;\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.writeFile)(uploadedFilePath, buffer);\n        console.log(`File written to ${uploadedFilePath}`);\n        ////////// FILE CHANGE IS STARTED /////////////\n        const uploadedFileType = path__WEBPACK_IMPORTED_MODULE_5___default().extname(uploadedfile.name).slice(1);\n        if (uploadedFileType === \"zip\") {\n            // Extract the contents of the uploaded ZIP file\n            const zip = new (adm_zip__WEBPACK_IMPORTED_MODULE_3___default())(uploadedFilePath); // or use 'unzipper' for extraction\n            const extractDir = `/tmp/${path__WEBPACK_IMPORTED_MODULE_5___default().parse(uploadedfile.name).name}`; // Directory to extract files\n            zip.extractAllTo(extractDir, /*overwrite*/ true);\n            console.log(`zipFile is extracted to ${extractDir}`);\n            // Start conversion process\n            convertXlsxFilesToPdf(extractDir).then(()=>console.log(\"All XLSX files converted to PDFs\")).catch((err)=>console.error(\"Conversion error:\", err));\n        }\n        ////////// FILE CHANGE IS FINISHED /////////////\n        // Start uploading the file to OpenAI\n        console.log(\"Starting file upload to OpenAI\");\n        const fileForRetrieval = await openai.files.create({\n            file: (0,fs__WEBPACK_IMPORTED_MODULE_2__.createReadStream)(uploadedFilePath),\n            purpose: \"assistants\"\n        });\n        FileIds.push(fileForRetrieval.id);\n        console.log(`File uploaded, ID: ${fileForRetrieval.id}`);\n        // Respond with success and the file ID\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            fileIds: FileIds\n        });\n    } catch (error) {\n        // Log and handle any errors during file upload\n        console.error(\"Error uploading file:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            message: \"Error uploading file\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFnRDtRQUVoRCxxQ0FBcUM7UUFDckNmLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU1SLG1CQUFtQixNQUFNUixPQUFPUyxLQUFLLENBQUNDLE1BQU0sQ0FBQztZQUNqREMsTUFBTWpCLG9EQUFnQkEsQ0FBQzZEO1lBQ3ZCM0MsU0FBUztRQUNYO1FBQ0FQLFFBQVFRLElBQUksQ0FBQ0wsaUJBQWlCTSxFQUFFO1FBQ2hDQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxtQkFBbUIsRUFBRVIsaUJBQWlCTSxFQUFFLENBQUMsQ0FBQztRQUV2RCx1Q0FBdUM7UUFDdkMsT0FBT3RCLGtGQUFZQSxDQUFDd0QsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBTWdCLFNBQVM1RDtRQUFRO0lBQzdELEVBQUUsT0FBTzBCLE9BQU87UUFDZCwrQ0FBK0M7UUFDL0NoQixRQUFRZ0IsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBT3ZDLGtGQUFZQSxDQUFDd0QsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RpQixTQUFTO1FBQ1g7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9uZGF5QXNzaXN0YW50Ly4vYXBwL2FwaS91cGxvYWQvcm91dGUudHM/YTg4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcHAvYXBpL3N0YXJ0Q2hhdC9yb3V0ZS50c1xyXG5cclxuLy8gVGhpcyBmaWxlIGRlZmluZXMgdGhlIEFQSSByb3V0ZSBmb3Igc3RhcnRpbmcgYSBjaGF0IHNlc3Npb24gaW4gYW4gYXBwbGljYXRpb24uXHJcbi8vIEl0IGhhbmRsZXMgUE9TVCByZXF1ZXN0cyBmb3IgdXBsb2FkaW5nIGEgZmlsZSB0byB0aGUgT3BlbkFJIEFQSSBmb3IgYSBjaGF0IHNlc3Npb24uXHJcbi8vIFRoZSByb3V0ZSBwcm9jZXNzZXMgdGhlIGZpbGUgZnJvbSB0aGUgcmVxdWVzdCwgc2F2ZXMgaXQgdGVtcG9yYXJpbHksIGFuZCB0aGVuXHJcbi8vIHVwbG9hZHMgaXQgdG8gT3BlbkFJLCByZXR1cm5pbmcgdGhlIGZpbGUgSUQgZm9yIGZ1cnRoZXIgb3BlcmF0aW9ucy5cclxuXHJcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgd3JpdGVGaWxlIH0gZnJvbSBcImZzL3Byb21pc2VzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVJlYWRTdHJlYW0gfSBmcm9tIFwiZnNcIjtcclxuaW1wb3J0IEFkbVppcCBmcm9tIFwiYWRtLXppcFwiO1xyXG5pbXBvcnQgT3BlbkFJIGZyb20gXCJvcGVuYWlcIjtcclxuaW1wb3J0IHhsc3ggZnJvbSBcIm5vZGUteGxzeFwiO1xyXG5pbXBvcnQgcGF0aE1vZHVsZSBmcm9tIFwicGF0aFwiO1xyXG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XHJcbi8vIGltcG9ydCB7IGxvYWQgfSBmcm9tIFwiQHBzcGRma2l0L25vZGVqc1wiO1xyXG4vLyBpbXBvcnQgeyBQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCJsYW5nY2hhaW4vcHJvbXB0c1wiO1xyXG4vLyBpbXBvcnQgeyBPcGVuQUlFbWJlZGRpbmdzIH0gZnJvbSBcImxhbmdjaGFpbi9lbWJlZGRpbmdzL29wZW5haVwiO1xyXG4vLyBpbXBvcnQgeyBSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIgfSBmcm9tIFwibGFuZ2NoYWluL3RleHRfc3BsaXR0ZXJcIjtcclxuLy8gaW1wb3J0IHsgUERGTG9hZGVyIH0gZnJvbSBcImxhbmdjaGFpbi9kb2N1bWVudF9sb2FkZXJzL2ZzL3BkZlwiO1xyXG4vLyBpbXBvcnQgeyBUZXh0TG9hZGVyIH0gZnJvbSBcImxhbmdjaGFpbi9kb2N1bWVudF9sb2FkZXJzL2ZzL3RleHRcIjtcclxuLy8gaW1wb3J0IHsgRG9jeExvYWRlciB9IGZyb20gXCJsYW5nY2hhaW4vZG9jdW1lbnRfbG9hZGVycy9mcy9kb2N4XCI7XHJcbi8vIGltcG9ydCB7IENTVkxvYWRlciB9IGZyb20gXCJsYW5nY2hhaW4vZG9jdW1lbnRfbG9hZGVycy9mcy9jc3ZcIjtcclxuLy8gaW1wb3J0IHsgRG9jdW1lbnQgfSBmcm9tIFwibGFuZ2NoYWluL2RvY3VtZW50XCI7XHJcblxyXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcclxuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxyXG59KTtcclxuXHJcbmxldCBGaWxlSWRzOiBTdHJpbmdbXSA9IFtdO1xyXG5cclxuLy8gYXN5bmMgZnVuY3Rpb24gdXBsb2FkRmlsZUxhbmdDaGFpbihwYXRoOiBzdHJpbmcpIHtcclxuLy8gICB0cnkge1xyXG4vLyAgICAgbGV0IHR5cGUgPSBwYXRoTW9kdWxlLmV4dG5hbWUocGF0aCkuc2xpY2UoMSk7XHJcblxyXG4vLyAgICAgbGV0IGNvbWJpbmVkRGVjb21wU1BSID0gXCJcIjtcclxuLy8gICAgIGxldCBkb2NzX3JhdzogRG9jdW1lbnQ8UmVjb3JkPHN0cmluZywgYW55Pj5bXSA9IFtdO1xyXG4vLyAgICAgY29uc3QgdGV4dFNwbGl0dGVyID0gbmV3IFJlY3Vyc2l2ZUNoYXJhY3RlclRleHRTcGxpdHRlcih7XHJcbi8vICAgICAgIC8vY2h1bmtTaXplOiA5OTk5LFxyXG4vLyAgICAgICBjaHVua1NpemU6IDEzMzMzMyxcclxuLy8gICAgICAgY2h1bmtPdmVybGFwOiAyNTAsXHJcbi8vICAgICB9KTtcclxuLy8gICAgIC8vIFJlYWQgdGhlIGZpbGVcclxuLy8gICAgIC8vdHJ5IHtcclxuLy8gICAgIGlmICh0eXBlID09PSBcInBkZlwiKSB7XHJcbi8vICAgICAgIGNvbnN0IHBkZkxvYWRlciA9IG5ldyBQREZMb2FkZXIocGF0aCk7XHJcbi8vICAgICAgIGRvY3NfcmF3ID0gYXdhaXQgcGRmTG9hZGVyLmxvYWRBbmRTcGxpdCh0ZXh0U3BsaXR0ZXIpO1xyXG4vLyAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcInRleHRcIikge1xyXG4vLyAgICAgICBjb25zdCB0eHRMb2FkZXIgPSBuZXcgVGV4dExvYWRlcihwYXRoKTtcclxuLy8gICAgICAgZG9jc19yYXcgPSBhd2FpdCB0eHRMb2FkZXIubG9hZEFuZFNwbGl0KHRleHRTcGxpdHRlcik7XHJcbi8vICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiY3N2XCIpIHtcclxuLy8gICAgICAgY29uc3QgY3N2TG9hZGVyID0gbmV3IENTVkxvYWRlcihwYXRoKTtcclxuLy8gICAgICAgZG9jc19yYXcgPSBhd2FpdCBjc3ZMb2FkZXIubG9hZEFuZFNwbGl0KHRleHRTcGxpdHRlcik7XHJcbi8vICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiZG9jXCIgfHwgdHlwZSA9PT0gXCJkb2N4XCIpIHtcclxuLy8gICAgICAgY29uc3QgZG9jeExvYWRlciA9IG5ldyBEb2N4TG9hZGVyKHBhdGgpO1xyXG4vLyAgICAgICBkb2NzX3JhdyA9IGF3YWl0IGRvY3hMb2FkZXIubG9hZEFuZFNwbGl0KHRleHRTcGxpdHRlcik7XHJcbi8vICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICBzZW5kRGF0YShcIltQcm9jZXNzaW5nXTpcIiArIFwiVW5zdXBwb3J0ZWQgRmlsZS4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XHJcbi8vICAgICAgIHNlbmREYXRhKFwiW0RPTkVdXCIpO1xyXG4vLyAgICAgICByZXNwb25zZS5lbmQoKTtcclxuLy8gICAgICAgcmV0dXJuO1xyXG4vLyAgICAgfVxyXG4vLyAgIH0gY2F0Y2ggKGUpIHtcclxuLy8gICAgIGNvbnNvbGUubG9nKFwiVXBsb2FkaW5nIHdpdGggTGFuZ0NoYWluIEVycm9yOlwiLCBlKTtcclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHVwbG9hZHRvT3BlbkFJKGZpbGVwYXRoOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZmlsZUZvclJldHJpZXZhbCA9IGF3YWl0IG9wZW5haS5maWxlcy5jcmVhdGUoe1xyXG4gICAgICBmaWxlOiBjcmVhdGVSZWFkU3RyZWFtKGZpbGVwYXRoKSxcclxuICAgICAgcHVycG9zZTogXCJhc3Npc3RhbnRzXCIsXHJcbiAgICB9KTtcclxuICAgIEZpbGVJZHMucHVzaChmaWxlRm9yUmV0cmlldmFsLmlkKTtcclxuICAgIGNvbnNvbGUubG9nKGBGaWxlIHVwbG9hZGVkLCBJRDogJHtmaWxlRm9yUmV0cmlldmFsLmlkfWApO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbnNvbGUubG9nKGBVcGxvYWRpbmcgZmlsZSB0byBPcGVuQUk6YCwgZSk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byBjb252ZXJ0IFhMU1ggdG8gUERGXHJcbmFzeW5jIGZ1bmN0aW9uIGNvbnZlcnRYbHN4VG9DU1YoeGxzeEZpbGVQYXRoOiBzdHJpbmcsIGNzdkZpbGVQYXRoOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgbGV0IG9iaiA9IHhsc3gucGFyc2UoeGxzeEZpbGVQYXRoKTtcclxuICAgIHZhciByb3dzID0gW107XHJcbiAgICB2YXIgd3JpdGVTdHIgPSBcIlwiO1xyXG5cclxuICAgIC8vbG9vcGluZyB0aHJvdWdoIGFsbCBzaGVldHNcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBzaGVldCA9IG9ialtpXTtcclxuICAgICAgLy9sb29wIHRocm91Z2ggYWxsIHJvd3MgaW4gdGhlIHNoZWV0XHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2hlZXRbXCJkYXRhXCJdLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgLy9hZGQgdGhlIHJvdyB0byB0aGUgcm93cyBhcnJheVxyXG4gICAgICAgIHJvd3MucHVzaChzaGVldFtcImRhdGFcIl1bal0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9jcmVhdGVzIHRoZSBjc3Ygc3RyaW5nIHRvIHdyaXRlIGl0IHRvIGEgZmlsZVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHdyaXRlU3RyICs9IHJvd3NbaV0uam9pbihcIixcIikgKyBcIlxcblwiO1xyXG4gICAgfVxyXG5cclxuICAgIC8vd3JpdGVzIHRvIGEgZmlsZSwgYnV0IHlvdSB3aWxsIHByZXN1bWFibHkgc2VuZCB0aGUgY3N2IGFzIGFcclxuICAgIC8vcmVzcG9uc2UgaW5zdGVhZFxyXG4gICAgZnMud3JpdGVGaWxlKGNzdkZpbGVQYXRoLCB3cml0ZVN0ciwgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coYENvbnZlcnRlZCBmcm9tICR7eGxzeEZpbGVQYXRofSB0byBDU1Ygc3VjY2Vzc2Z1bGx5IWApO1xyXG5cclxuICAgICAgdXBsb2FkdG9PcGVuQUkoY3N2RmlsZVBhdGgpO1xyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHdoaWxlIGNvbnZlcnRpbmcgJHt4bHN4RmlsZVBhdGh9IHRvIENTVjpgLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjsgLy8gUHJvcGFnYXRlIHRoZSBlcnJvciBmdXJ0aGVyIGlmIG5lZWRlZFxyXG4gIH1cclxufVxyXG5cclxuLy8gRnVuY3Rpb24gdG8gcmVjdXJzaXZlbHkgY29udmVydCBYTFNYIGZpbGVzIGluIHN1YmRpcmVjdG9yaWVzIHRvIFBERnNcclxuYXN5bmMgZnVuY3Rpb24gY29udmVydFhsc3hGaWxlc1RvUGRmKGRpcmVjdG9yeTogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGZpbGVzID0gZnMucmVhZGRpclN5bmMoZGlyZWN0b3J5KTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcclxuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoTW9kdWxlLmpvaW4oZGlyZWN0b3J5LCBmaWxlKTtcclxuICAgICAgY29uc3QgZmlsZVN0YXQgPSBmcy5zdGF0U3luYyhmaWxlUGF0aCk7XHJcblxyXG4gICAgICBpZiAoZmlsZVN0YXQuaXNEaXJlY3RvcnkoKSkge1xyXG4gICAgICAgIGF3YWl0IGNvbnZlcnRYbHN4RmlsZXNUb1BkZihmaWxlUGF0aCk7IC8vIFJlY3Vyc2l2ZWx5IGhhbmRsZSBzdWJkaXJlY3Rvcmllc1xyXG4gICAgICB9IGVsc2UgaWYgKGZpbGUuZW5kc1dpdGgoXCIueGxzeFwiKSkge1xyXG4gICAgICAgIGNvbnN0IGNzdkZpbGVOYW1lID0gYCR7cGF0aE1vZHVsZS5iYXNlbmFtZShmaWxlLCBcIi54bHN4XCIpfS5jc3ZgO1xyXG4gICAgICAgIGNvbnN0IGNzdkZpbGVQYXRoID0gcGF0aE1vZHVsZS5qb2luKGRpcmVjdG9yeSwgY3N2RmlsZU5hbWUpO1xyXG5cclxuICAgICAgICBhd2FpdCBjb252ZXJ0WGxzeFRvQ1NWKGZpbGVQYXRoLCBjc3ZGaWxlUGF0aCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYENvbnZlcnRlZCAke2ZpbGV9IHRvICR7Y3N2RmlsZU5hbWV9YCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXBsb2FkdG9PcGVuQUkoZmlsZVBhdGgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHdoaWxlIHByb2Nlc3NpbmcgZGlyZWN0b3J5ICR7ZGlyZWN0b3J5fTpgLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjsgLy8gUHJvcGFnYXRlIHRoZSBlcnJvciBmdXJ0aGVyIGlmIG5lZWRlZFxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gTG9nZ2luZyB0aGUgc3RhcnQgb2YgdGhlIHVwbG9hZCBwcm9jZXNzXHJcbiAgICBjb25zb2xlLmxvZyhgVXBsb2FkIEFQSSBjYWxsIHN0YXJ0ZWRgKTtcclxuXHJcbiAgICAvLyBSZXRyaWV2aW5nIHRoZSBmaWxlIGZyb20gdGhlIGZvcm0gZGF0YVxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKTtcclxuICAgIGNvbnN0IHVwbG9hZGVkZmlsZTogRmlsZSB8IG51bGwgPSBkYXRhLmdldChcIkZpbGVcIikgYXMgdW5rbm93biBhcyBGaWxlO1xyXG5cclxuICAgIC8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSBubyBmaWxlIGlzIGZvdW5kIGluIHRoZSByZXF1ZXN0XHJcbiAgICBpZiAoIXVwbG9hZGVkZmlsZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIk5vIEZpbGUgZm91bmQgaW4gdGhlIHJlcXVlc3RcIik7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbnZlcnQgZmlsZSB0byBidWZmZXIgYW5kIHdyaXRlIHRvIGEgdGVtcG9yYXJ5IGxvY2F0aW9uXHJcbiAgICBjb25zdCBieXRlcyA9IGF3YWl0IHVwbG9hZGVkZmlsZS5hcnJheUJ1ZmZlcigpO1xyXG4gICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oYnl0ZXMpO1xyXG4gICAgY29uc3QgdXBsb2FkZWRGaWxlUGF0aCA9IGAvdG1wLyR7dXBsb2FkZWRmaWxlLm5hbWV9YDtcclxuICAgIGF3YWl0IHdyaXRlRmlsZSh1cGxvYWRlZEZpbGVQYXRoLCBidWZmZXIpO1xyXG4gICAgY29uc29sZS5sb2coYEZpbGUgd3JpdHRlbiB0byAke3VwbG9hZGVkRmlsZVBhdGh9YCk7XHJcblxyXG4gICAgLy8vLy8vLy8vLyBGSUxFIENIQU5HRSBJUyBTVEFSVEVEIC8vLy8vLy8vLy8vLy9cclxuICAgIGNvbnN0IHVwbG9hZGVkRmlsZVR5cGUgPSBwYXRoTW9kdWxlLmV4dG5hbWUodXBsb2FkZWRmaWxlLm5hbWUpLnNsaWNlKDEpO1xyXG4gICAgaWYgKHVwbG9hZGVkRmlsZVR5cGUgPT09IFwiemlwXCIpIHtcclxuICAgICAgLy8gRXh0cmFjdCB0aGUgY29udGVudHMgb2YgdGhlIHVwbG9hZGVkIFpJUCBmaWxlXHJcbiAgICAgIGNvbnN0IHppcCA9IG5ldyBBZG1aaXAodXBsb2FkZWRGaWxlUGF0aCk7IC8vIG9yIHVzZSAndW56aXBwZXInIGZvciBleHRyYWN0aW9uXHJcbiAgICAgIGNvbnN0IGV4dHJhY3REaXIgPSBgL3RtcC8ke3BhdGhNb2R1bGUucGFyc2UodXBsb2FkZWRmaWxlLm5hbWUpLm5hbWV9YDsgLy8gRGlyZWN0b3J5IHRvIGV4dHJhY3QgZmlsZXNcclxuICAgICAgemlwLmV4dHJhY3RBbGxUbyhleHRyYWN0RGlyLCAvKm92ZXJ3cml0ZSovIHRydWUpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coYHppcEZpbGUgaXMgZXh0cmFjdGVkIHRvICR7ZXh0cmFjdERpcn1gKTtcclxuICAgICAgLy8gU3RhcnQgY29udmVyc2lvbiBwcm9jZXNzXHJcbiAgICAgIGNvbnZlcnRYbHN4RmlsZXNUb1BkZihleHRyYWN0RGlyKVxyXG4gICAgICAgIC50aGVuKCgpID0+IGNvbnNvbGUubG9nKFwiQWxsIFhMU1ggZmlsZXMgY29udmVydGVkIHRvIFBERnNcIikpXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJDb252ZXJzaW9uIGVycm9yOlwiLCBlcnIpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLy8vLy8vLy8vIEZJTEUgQ0hBTkdFIElTIEZJTklTSEVEIC8vLy8vLy8vLy8vLy9cclxuXHJcbiAgICAvLyBTdGFydCB1cGxvYWRpbmcgdGhlIGZpbGUgdG8gT3BlbkFJXHJcbiAgICBjb25zb2xlLmxvZyhcIlN0YXJ0aW5nIGZpbGUgdXBsb2FkIHRvIE9wZW5BSVwiKTtcclxuICAgIGNvbnN0IGZpbGVGb3JSZXRyaWV2YWwgPSBhd2FpdCBvcGVuYWkuZmlsZXMuY3JlYXRlKHtcclxuICAgICAgZmlsZTogY3JlYXRlUmVhZFN0cmVhbSh1cGxvYWRlZEZpbGVQYXRoKSxcclxuICAgICAgcHVycG9zZTogXCJhc3Npc3RhbnRzXCIsXHJcbiAgICB9KTtcclxuICAgIEZpbGVJZHMucHVzaChmaWxlRm9yUmV0cmlldmFsLmlkKTtcclxuICAgIGNvbnNvbGUubG9nKGBGaWxlIHVwbG9hZGVkLCBJRDogJHtmaWxlRm9yUmV0cmlldmFsLmlkfWApO1xyXG5cclxuICAgIC8vIFJlc3BvbmQgd2l0aCBzdWNjZXNzIGFuZCB0aGUgZmlsZSBJRFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZmlsZUlkczogRmlsZUlkcyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgLy8gTG9nIGFuZCBoYW5kbGUgYW55IGVycm9ycyBkdXJpbmcgZmlsZSB1cGxvYWRcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGxvYWRpbmcgZmlsZTpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IFwiRXJyb3IgdXBsb2FkaW5nIGZpbGVcIixcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwid3JpdGVGaWxlIiwiY3JlYXRlUmVhZFN0cmVhbSIsIkFkbVppcCIsIk9wZW5BSSIsInhsc3giLCJwYXRoTW9kdWxlIiwiZnMiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJGaWxlSWRzIiwidXBsb2FkdG9PcGVuQUkiLCJmaWxlcGF0aCIsImZpbGVGb3JSZXRyaWV2YWwiLCJmaWxlcyIsImNyZWF0ZSIsImZpbGUiLCJwdXJwb3NlIiwicHVzaCIsImlkIiwiY29uc29sZSIsImxvZyIsImUiLCJjb252ZXJ0WGxzeFRvQ1NWIiwieGxzeEZpbGVQYXRoIiwiY3N2RmlsZVBhdGgiLCJvYmoiLCJwYXJzZSIsInJvd3MiLCJ3cml0ZVN0ciIsImkiLCJsZW5ndGgiLCJzaGVldCIsImoiLCJqb2luIiwiZXJyIiwiZXJyb3IiLCJjb252ZXJ0WGxzeEZpbGVzVG9QZGYiLCJkaXJlY3RvcnkiLCJyZWFkZGlyU3luYyIsImZpbGVQYXRoIiwiZmlsZVN0YXQiLCJzdGF0U3luYyIsImlzRGlyZWN0b3J5IiwiZW5kc1dpdGgiLCJjc3ZGaWxlTmFtZSIsImJhc2VuYW1lIiwiUE9TVCIsInJlcXVlc3QiLCJkYXRhIiwiZm9ybURhdGEiLCJ1cGxvYWRlZGZpbGUiLCJnZXQiLCJqc29uIiwic3VjY2VzcyIsImJ5dGVzIiwiYXJyYXlCdWZmZXIiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwidXBsb2FkZWRGaWxlUGF0aCIsIm5hbWUiLCJ1cGxvYWRlZEZpbGVUeXBlIiwiZXh0bmFtZSIsInNsaWNlIiwiemlwIiwiZXh0cmFjdERpciIsImV4dHJhY3RBbGxUbyIsInRoZW4iLCJjYXRjaCIsImZpbGVJZHMiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/upload/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/ms","vendor-chunks/openai","vendor-chunks/adm-zip","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/node-xlsx","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/web-streams-polyfill","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=E%3A%5CHIG%5CTask%5COpenAI-Assistant-API-Chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CHIG%5CTask%5COpenAI-Assistant-API-Chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();